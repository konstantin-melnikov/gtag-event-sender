!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.gtagEventSender=t():e.gtagEventSender=t()}(self,(function(){return(()=>{"use strict";var e={749:(e,t,n)=>{function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.r(t),n.d(t,{default:()=>r});const r=new(function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t="prod","env"in this?Object.defineProperty(this,"env",{value:t,enumerable:!0,configurable:!0,writable:!0}):this.env=t;var n=this.getParam("gtag_event_sender","env"),a=this.getParam("gtag_event_sender","id");this.init(n,a)}var t,n;return t=e,(n=[{key:"init",value:function(e,t){var n=this;e&&(this.env=e,this.log("Script run in ".concat(this.env," env"))),this.checkGtag()?document.addEventListener("DOMContentLoaded",(function(){n.initEvents()})):t&&(this.initGtag(t),document.addEventListener("DOMContentLoaded",(function(){n.initEvents()})))}},{key:"initGtag",value:function(e){this.log("Add Gtag script for ".concat(e));var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.async=!0,n.src="https://www.googletagmanager.com/gtag/js?id=".concat(e);var a=document.createElement("script");a.text="window.dataLayer = window.dataLayer || [];\n      function gtag(){dataLayer.push(arguments);}\n      gtag('js', new Date());\n      gtag('config', '".concat(e,"');"),t.prepend(n,a)}},{key:"initEvents",value:function(){var e=this,t=document.querySelectorAll("[gtag]");void 0!==t&&t.forEach((function(t){switch(t.getAttribute("gtag")){case"click":e.eventClick(t);break;case"submit":e.eventSubmit(t);break;case"scroll":e.eventScroll(t);break;default:e.log('Method for event "'.concat(t.getAttribute("gtag"),'" not found.'))}}))}},{key:"eventClick",value:function(e){var t=this;e.addEventListener("click",(function(e){t.sendEvent(e.target)}))}},{key:"eventSubmit",value:function(e){var t=this;e.addEventListener("submit",(function(e){e.preventDefault(),e.stopPropagation(),t.sendEvent(e.target),"dev"==t.env?t.log({message:"Form can send in prod env"}):e.target.submit()}))}},{key:"eventScroll",value:function(e){var t=this;new IntersectionObserver((function(e,n){e.forEach((function(e){e.isIntersecting&&(t.sendEvent(e.target),n.unobserve(e.target))}))}),{}).observe(e)}},{key:"sendEvent",value:function(e){var t=e.getAttribute("gtag_action")||!1;if(!t)return this.log({message:"Must be attribute gtag_action",target:e}),!1;var n={};["event_category","event_label","value"].map((function(t){e.getAttribute("gtag_".concat(t))&&(n[t]=e.getAttribute("gtag_".concat(t)))})),"dev"==this.env?this.log({message:"Sent event",event:["event",t,n]}):gtag("event",t,n)}},{key:"setDevEnv",value:function(){this.env="dev"}},{key:"log",value:function(e){if("dev"==this.env){var t;try{throw new Error}catch(e){/([^(]+)@|at ([^(]+) \(/g.exec(e.stack),t=e.stack.split("at ")[2].split(" ")[0]}console.log({func:t,obj:e})}}},{key:"checkGtag",value:function(){return void 0!==window.dataLayer||(this.log("Gtag is not init."),!1)}},{key:"getParam",value:function(e,t){for(var n=document.getElementsByTagName("script"),a=0;a<n.length;a++)if(n[a].src.indexOf("/"+e)>-1){for(var r=n[a].src.split("?").pop().split("&"),o=0;o<r.length;o++){var i=r[o].split("=");if(i[0]===t)return i[1]}return!1}return!1}}])&&a(t.prototype,n),e}())}},t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}return n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(749)})()}));